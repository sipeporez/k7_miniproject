package com.subway.service;

import java.util.Date;
import java.util.List;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;

import com.subway.domain.Board;
import com.subway.domain.BoardDTO;
import com.subway.persistence.BoardRepository;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class BoardService {

	private final BoardRepository br;

	// 모든 보드 목록 조회
	public Page<Board> getBoards(Pageable pageable) {
		return br.getBoards(pageable);
	}
	
	// 닉네임으로 게시글 조회
	public Page<Board> getBoardsByNickname(Pageable pageable, String nickname){
		return br.getBoardsByNickname(pageable, nickname);
	}
	// 제목으로 게시글 조회
	public Page<BoardDTO> getBoardsByTitle(Pageable pageable, String searchKeyword){
		return br.getBoardsByKeyword(pageable, searchKeyword);
	}
	// 내용으로 게시글 조회
	public Page<BoardDTO> getBoardsByContent(Pageable pageable, String searchKeyword){
		return br.getBoardsByKeyword(pageable, searchKeyword);
	}

	public Page<Board> saveBoard(Pageable pageable, Board b) {
		br.save(Board.builder()
				.title(b.getTitle())
				.content(b.getContent())
				.nickname(b.getNickname())
				.createDate(new Date())
				.build());

		return br.getBoards(pageable);
	}


}
