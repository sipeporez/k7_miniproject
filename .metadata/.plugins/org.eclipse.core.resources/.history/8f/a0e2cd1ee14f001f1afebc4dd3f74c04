package com.subway.service;

import java.util.Date;
import java.util.List;

import org.springframework.stereotype.Service;

import com.subway.domain.Board;
import com.subway.persistence.BoardRepository;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class BoardService {

	private final BoardRepository br;
	public List<Board> getBoards() {
		
		List<Board> boards = br.findAll();
        for (Board post : boards) {
            post.setMember(post.getMember().getNickname());  // member 필드 제거
        }
		return boards;
	}
	
	public Board getBoard(Integer id) {
		return br.findById(id).get();
	}
	
	public List<Board> saveBoard(Board b) {
		br.save(Board.builder()
				.title(b.getTitle())
				.content(b.getContent())
				.nickname(b.getNickname())
				.createDate(new Date())
				.build()
				);
		
		return br.findAll();
	}

}
